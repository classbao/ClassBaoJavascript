<!doctype html>
<html>

<head>
    <meta charset="UTF-8">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="MobileOptimized" content="240">
    <meta name="applicable-device" content="mobile">
    <meta name="viewport"
        content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, user-scalable=no,shrink-to-fit=no">
    <meta name="format-detection" content="telephone=no,email=no,adress=no">

    <!-- <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico"> -->
    <!-- <link href="/favicon.ico" rel="icon" type="image/x-icon"> -->

    <link href="xxhMultiSelect-v1.20250420.css" rel="stylesheet" type="text/css">

    <!-- 自动加载适应移动端的css -->
    <!-- <link href="mobile.css" rel="stylesheet" type="text/css" media="screen and (max-device-width: 1080px)"> -->

    <meta name="theme-color" content="#3c80d4" media="(prefers-color-scheme: light)">
    <meta name="theme-color" content="#9cc8ff" media="(prefers-color-scheme: dark)">

    <title>带有多选和突出显示关键字的自定义下拉选择框</title>
    <meta name="Description"
        content="带有多选和突出显示关键字的自定义下拉选择框：Custom Dropdown Select Box with Multiple Selection and Highlighting Keywords">
    <meta name="author" content="熊仔其人">

    <!-- CSS样式 -->
    <style type="text/css">

    </style>

    <script src="../ClassBaoJavascript-1.1.0.js"></script>
    <script src="xxhMultiSelect-v1.20250420.js"></script>

</head>

<body>
    带有多选和突出显示关键字的自定义下拉选择框：
    Custom Dropdown Select Box with Multiple Selection and Highlighting Keywords:
    <hr />

    <!--<label data-id="1">选中项1</label><label data-id="2">选中项2</label><label data-id="3">选中项3</label><label
                    data-id="4">选中项4</label><label data-id="5">选中项5</label><label data-id="6">选中项6</label>-->

    <!-- 自定义下拉选择框 html 开始 -->
    <div class="xxh-multi-select-container" id="myCustomSelect">
        <span class="input-group-addon-left">选择：</span>
        <div class="input-wrapper">
            <div class="multiSelectInput">请选择...</div>
            <div class="dropdown-wrapper" data-selectedOptions="">
                <div class="dropdown-input-wrapper"><input type="text" class="search-input" placeholder="搜索..."></div>
                <div class="dropdown-options"><!-- 选项将通过JavaScript动态添加 --></div>
            </div>
        </div>
    </div>
    <!-- 自定义下拉选择框 html 结束 -->


    <!-- 自定义下拉选择框 JS脚本 开始 -->
    <script>
        document.addEventListener('DOMContentLoaded', function () {
            const input = document.querySelector('.xxh-multi-select-container .multiSelectInput');
            const dropdown = document.querySelector('.xxh-multi-select-container .dropdown-options');
            const inputWrapper = document.querySelector('.xxh-multi-select-container .input-wrapper');

            function myAjaxFun(searchWord) {
                // 模拟Ajax异步查询选项，并绑定到下拉列表
                const options = [
                    { id: 1, text: '选项1A' },
                    { id: 2, text: '选项2B' },
                    { id: 3, text: '选项3C' },
                    { id: 4, text: '选项4D' },
                    { id: 5, text: '选项5E' },
                    { id: 6, text: '选项6F' }
                ];

                let filterOptions = [];
                if (!!searchWord) {
                    filterOptions = options.filter(function (item) {
                        const text = item.text;
                        return text.includes(searchWord);
                    });
                }
                else {
                    filterOptions = options;
                }

                // 根据搜索词筛选的Ajax异步查询选项结果，并绑定到下拉列表
                CBJS.xxhMultiSelect.buildDropdown('#myCustomSelect', filterOptions);
            }

            // 页面结构加载完成后执行自定义下拉选择框的初始化
            CBJS.xxhMultiSelect.init('#myCustomSelect', '', myAjaxFun);
        });


        // 获取自定义下拉选择框的选中值
        const mySelectedOptions = CBJS.xxhMultiSelect.getSelectedOptions('#myCustomSelect');
        console.log(JSON.stringify(mySelectedOptions));

    </script>
    <!-- 自定义下拉选择框 JS脚本 结束 -->

</body>

</html>